<p style="color: green"><%= notice %></p>

<div id="<%= dom_id @project %>">
  <h3>
    <strong><%= @project.name %></strong>
  </h3>

  <h4>Details</h4>
  
  <p>
    <%= @project.description %><br>
    <p><u>Owner</u> : <%= @project.user.full_name %></p>
  </p>
  
</div>

<h4>Tasks</h4>
<table class="w3-table-all">
  <thead>
    <tr class="w3-light-grey">
      <th>Name</th>
      <th>Assigned to</th>
      <th>Level</th>
      <th>Status</th>
      <th>Due date</th>
      <th>Remain</th>
      <th>Overdue</th>
    </tr>
  <thead>
  <% @project.tasks.each do |task| %>
    <tr>
      <td><%= task.name %></td>
      <td><%= task.user.full_name %></td>
      <td><small><%= format_level_color(task.level) unless task.status_done? %></small></td>
      <td><%= format_enum task.status %></td>
      <td><%= task.due_date %></td>
      <td class="w3-center"><%= task.how_many_days_before_due_date? %></td>
      <td class="w3-center w3-xlarge"><%= '<i class="fa fa-exclamation-circle" aria-hidden="true"></i>'.html_safe if task.overdue? %></td>
    </tr>
  <% end %>
</table>

<h4>Collaborators</h4>

<ul>
  <% @project.users.each do |user| %>
    <li><%= user.full_name %> (<%= user.tasks.count %>)</li>
  <% end %>
</ul>

<div>
  <%= link_to "Edit this project", edit_project_path(@project) %> |
  <%= link_to "Back to projects", projects_path %>
  <%= button_to "Destroy this project", @project, method: :delete %>
</div>
